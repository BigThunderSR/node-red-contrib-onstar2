<script type="text/javascript">
    RED.nodes.registerType('get-account-vehicles', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Get Account Vehicles' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Account Vehicle Capabilities","result.response"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'get-account-vehicles';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var originalName = "Get Account Vehicles";
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val(originalName);
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('get-diagnostics', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Diagnostics' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Diagnostics","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'diagnostics';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Diagnostics");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('lock-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Lock Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' },
            delay: { required: false, validate: RED.validators.regex(/^(|\d)+$/)}
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'lock-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Lock Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('unlock-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Unlock Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' },
            delay: { required: false, validate: RED.validators.regex(/^(|\d)+$/)}
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'unlock-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Unlock Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>


<script type="text/javascript">
    RED.nodes.registerType('start-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Start Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'start-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Start Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('cancel-start-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Cancel Start Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'cancel-start-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Cancel Start Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>


<script type="text/javascript">
    RED.nodes.registerType('alert-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Alert Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'alert-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Alert Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('alert-myvehicle-lights', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Alert Vehicle Lights Only' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'alert-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Alert Vehicle Lights Only");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('alert-myvehicle-horn', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Alert Vehicle Horn Only' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'alert-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {            
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Alert Vehicle Horn Only");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('cancel-alert-myvehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Cancel Alert Vehicle' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'cancel-alert-vehicle';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Cancel Alert Vehicle");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('locate-vehicle', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Get Vehicle Location' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Location Information","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'location';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Get Vehicle Location");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('mycharge-override', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Override Charge State' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'charge-override';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Override Charge State");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('get-mycharge-profile', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Get Charging Profile' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Get Charging Profile","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'get-charge-profile';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Get Charging Profile");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('set-mycharge-profile', {
        category: 'onstar2',
        color: '#7eb0ff',
        defaults: {
            name: { value: 'Set Charge Profile' },
            onstar2: { value: 'Onstar Config', type: 'onstar2' }
        },
        inputs: 1,
        outputs: 2,
        outputLabels: ["Command Status","result.response.data"],
        icon: 'onstar.png',
        label: function () {
            //return this.name || 'set-charge-profile';
            var configCarName = RED.nodes.node(this.onstar2);
            return configCarName.label()+" "+this.name;
        },
        oneditsave: function() {
            var editNodeName = $("#node-input-name").val();
            if (editNodeName == '') {
                $("#node-input-name").val("Set Charge Profile");
            }
            $("#node-input-name").val();
        },
    });
</script>

<script type="text/javascript">
    RED.nodes.registerType('onstar2', {
        category: 'config',
        defaults: {
            carname: { required: true },
            username: { required: true },
            password: { required: true },
            pin: { required: true, validate: RED.validators.number() },
            vin: { required: true },
            deviceid: { required: true },
            checkrequeststatus: { value: true, required: true },
            requestpollingtimeoutseconds: { value: 90, required: true, validate: RED.validators.number() },
            requestpollingintervalseconds: { value: 6, required: true, validate: RED.validators.number() }
        },
        label: function () {
            return this.carname;
        },
        oneditprepare: function() {                                    
            var editNodeValRequestPollingTimeoutSeconds = $("#node-config-input-requestpollingtimeoutseconds").val();
            var editNodeValRequestPollingIntervalSeconds = $("#node-config-input-requestpollingintervalseconds").val();
            
            $("#node-config-input-checkrequeststatus").typedInput({
            type:"bool"
            });

            if (editNodeValRequestPollingTimeoutSeconds == '') {
                $("#node-config-input-requestpollingtimeoutseconds").val(90);
            }
            $("#node-config-input-requestpollingtimeoutseconds").val();

            if (editNodeValRequestPollingIntervalSeconds == '') {
                $("#node-config-input-requestpollingintervalseconds").val(6);
            }
            $("#node-config-input-requestpollingintervalseconds").val();
        },
        oneditsave: function() {                        
            var editNodeValRequestPollingTimeoutSeconds = $("#node-config-input-requestpollingtimeoutseconds").val();
            var editNodeValRequestPollingIntervalSeconds = $("#node-config-input-requestpollingintervalseconds").val();
                        
            if (editNodeValRequestPollingTimeoutSeconds == '') {
                $("#node-config-input-requestpollingtimeoutseconds").val(90);
            }
            $("#node-config-input-requestpollingtimeoutseconds").val();

            if (editNodeValRequestPollingIntervalSeconds == '') {
                $("#node-config-input-requestpollingintervalseconds").val(6);
            }
            $("#node-config-input-requestpollingintervalseconds").val();
        },
    });
</script>

<script type="text/html" data-template-name="get-account-vehicles">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="get-account-vehicles">
    <p>Get requests supported by the vehicle</p>
</script>

<script type="text/html" data-template-name="get-diagnostics">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="get-diagnostics">
    <p>Get diagnostic information for the vehicle</p>
</script>

<script type="text/html" data-template-name="lock-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-delay"><i class="icon-bookmark"></i> Delay (Minutes)</label>
        <input type="text" id="node-input-delay" />
    </div>
</script>

<script type="text/html" data-help-name="lock-myvehicle">
    <p>Lock vehicle doors. Delay parameter is in minutes and is optional, but if not set in the config dialog, defaults to 0 (immediate/no delay) or the value sent to the input via "msg.payload.delay".</p>
</script>

<script type="text/html" data-template-name="unlock-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-delay"><i class="icon-bookmark"></i> Delay (Minutes)</label>
        <input type="text" id="node-input-delay" />
    </div>
</script>

<script type="text/html" data-help-name="unlock-myvehicle">
    <p>Unlock vehicle doors. Delay parameter is in minutes and is optional, but if not set in the config dialog, defaults to 0 (immediate/no delay) or the value sent to the input via "msg.payload.delay".</p>
</script>

<script type="text/html" data-template-name="start-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="start-myvehicle">
    <p>Start the vehicle</p>
</script>

<script type="text/html" data-template-name="cancel-start-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="cancel-start-myvehicle">
    <p>Stop the vehicle if it was started remotely</p>
</script>

<script type="text/html" data-template-name="alert-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="alert-myvehicle">
    <p>Turn on vehicle alert (horn and lights)</p>
</script>

<script type="text/html" data-template-name="alert-myvehicle-lights">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="alert-myvehicle-lights">
    <p>Turn on vehicle alert (lights only)</p>
</script>

<script type="text/html" data-template-name="alert-myvehicle-horn">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="alert-myvehicle-horn">
    <p>Turn on vehicle alert (horn only)</p>
</script>


<script type="text/html" data-template-name="cancel-alert-myvehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="cancel-alert-myvehicle">
    <p>Stop the vehicle alert</p>
</script>

<script type="text/html" data-template-name="locate-vehicle">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="locate-vehicle">
    <p>Get vehicle location</p>
</script>

<script type="text/html" data-template-name="mycharge-override">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="mycharge-override">
    <p>Override charging state</p>
</script>

<script type="text/html" data-template-name="set-mycharge-profile">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="set-mycharge-profile">
    <p>Set the charge profile</p>
</script>

<script type="text/html" data-template-name="get-mycharge-profile">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>
    <div class="form-row">
        <label for="node-input-onstar2"><i class="icon-tag"></i> Config</label>
        <input type="text" id="node-input-onstar2" placeholder="Name" />
    </div>
</script>

<script type="text/html" data-help-name="get-mycharge-profile">
    <p>Get the charge profile</p>
</script>

<script type="text/html" data-template-name="onstar2">
    <div class="form-row">
        <label for="node-config-input-name"><i class="icon-bookmark"></i> Name</label>
        <input type="text" id="node-config-input-name" value="OnStar" />
    </div>
    <div class="form-row">
        <label for="node-config-input-carname"><i class="icon-bookmark"></i> Car Name</label>
        <input type="text" id="node-config-input-carname" />
    </div>
    <div class="form-row">
        <label for="node-config-input-username"><i class="icon-bookmark"></i> Username</label>
        <input type="text" id="node-config-input-username" />
    </div>
    <div class="form-row">
        <label for="node-config-input-password"><i class="icon-bookmark"></i> Password</label>
        <input type="password" id="node-config-input-password" />
    </div>
    <div class="form-row">
        <label for="node-config-input-pin"><i class="icon-bookmark"></i> Pin</label>
        <input type="password" id="node-config-input-pin" />
    </div>
    <div class="form-row">
        <label for="node-config-input-vin"><i class="icon-bookmark"></i> Vin</label>
        <input type="text" id="node-config-input-vin" />
    </div>
    <div class="form-row">
        <label for="node-config-input-deviceid"><i class="icon-bookmark"></i> Device ID (any valid UUID)</label>
        <input type="text" id="node-config-input-deviceid" />
    </div>
    <div class="form-row">
        <label for="node-config-input-checkrequeststatus"><i class="icon-bookmark"></i> Set checkRequestStatus Value for OnStarJS</label>
        <input type="text" id="node-config-input-checkrequeststatus" />
    </div>
    <div class="form-row">
        <label for="node-config-input-requestpollingtimeoutseconds"><i class="icon-bookmark"></i> Set requestPollingTimeoutSeconds Value for OnStarJS</label>
        <input type="text" id="node-config-input-requestpollingtimeoutseconds" />
    </div>
    <div class="form-row">
        <label for="node-config-input-requestpollingintervalseconds"><i class="icon-bookmark"></i> Set requestPollingIntervalSeconds Value for OnStarJS</label>
        <input type="text" id="node-config-input-requestpollingintervalseconds" />
    </div>
</script>